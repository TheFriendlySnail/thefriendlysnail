<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snail Burger - The Friendly Snail</title>
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="icon" href="/favicon.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script defer src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; padding: 0px; max-width: 1500px; margin: auto; }
    .review { border-bottom: 1px solid #ccc; padding: 10px 0; }
    .stars { color: gold; font-size: 1.2em; }
    label { display: block; margin-top: 10px; }
    textarea, input, select, button { width: 100%; padding: 8px; margin-top: 5px; }
    button { background: #333; color: white; border: none; cursor: pointer; margin-top: 10px; }
    button:hover { background: #555; }
  </style>
</head>
<body>

<!-- Navigation Bar -->
<nav class="navbar">
  <div class="nav-container">
    <a href="/" class="logo-link">
      <img src="../../assets/logo.png" alt="The Friendly Snail Logo" class="logo">
    </a>
    <ul class="nav-links">
      <li><a href="/about/">About</a></li>
      <li><a href="/contact/">Contact</a></li>
      <li><a href="/shop/">Shop</a></li>
      <li><a href="/checkout/"><i class="fas fa-shopping-cart"></i></a></li>
    </ul>
  </div>
</nav>

<div class="container">
  <!-- Product Gallery -->
  <div class="product-images">
    <img id="mainImage" src="" alt="Main Product Image" class="main-image">
    <div class="thumbnail-images">
      <img src="/assets/snailburger1.jpg" alt="Thumbnail 1" class="thumbnail" onclick="changeImage(this)">
      <img src="/assets/snailburger2.jpg" alt="Thumbnail 2" class="thumbnail" onclick="changeImage(this)">
      <img src="/assets/snailburger3.jpg" alt="Thumbnail 3" class="thumbnail" onclick="changeImage(this)">
    </div>
  </div>

  <!-- Product Details -->
  <div class="details">
    <h1>Snail Burger</h1>
    <p class="price" id="price">$9.99</p>

    <label for="quantity">Quantity</label>
    <input type="number" id="quantity" value="1" min="1">

    <label for="size">Size</label>
    <select id="size" onchange="updatePrice()">
      <option value="9.99">Small</option>
      <option value="17.49">Medium</option>
      <option value="24.99">Large</option>
    </select>

    <button class="add-to-cart" onclick="addToCart()">Add to Cart</button>
  </div>
</div>

<!-- Accordion Sections -->
<div class="accordion">
  <div class="accordion-section">
    <div class="accordion-header" onclick="toggleAccordion(this)">Description</div>
    <div class="accordion-content">
      Made from a nutritious blend of cucumber, broccoli, spinach, and carrot, our Snail Burgers are the perfect plant-based snack for your aquatic snails. Gently bound and shaped into easy-to-eat patties, they provide essential nutrients and enrichment while keeping your tank clean and happy.<br><br>
✅ 100% vegetarian<br>
✅ Snail-safe & aquarium-friendly<br>
✅ No added preservatives<br><br>
Let your snails snack slow and healthy — they’ll love you for it!
    </div>
  </div>

  <div class="accordion-section">
    <div class="accordion-header" onclick="toggleAccordion(this)">Ingredients</div>
    <div class="accordion-content">
      <em>Ingredients are listed in order of proportions</em><br><br>
      Broccoli<br><br>
      Cucumber<br><br>
      Spinach<br><br>
      Carrot<br><br>
      Calcium Carbonate<br><br>
      Limnospira
    </div>
  </div>

  <div class="accordion-section">
    <div class="accordion-header" onclick="toggleAccordion(this)">Directions for Use</div>
    <div class="accordion-content">
      Get a small, shallow container and fill it with some water from the aquarium<br>

Gently push on the plastic of the blister pack to push the snail burger out<br>

Put the snail burger in the shallow container and let sit for 5-10 minutes to allow for full thawing<br>

Once the burger is fully thawed, spear it on a weighted skewer or another utensil<br>

Gently place it in the tank and pour the water in with it<br>

Let your snails enjoy their brand new snack!<br><br>

One Snail Burger should last 2 average-sized mystery snails at least 2 days
    </div>
  </div>

  <div class="accordion-section">
    <div class="accordion-header" onclick="toggleAccordion(this)">Storage Instructions</div>
    <div class="accordion-content">
      Store in a cool, dry place.<br>
      Freeze after opening for maximum freshness.<br>
      Use within 6 months of opening.
    </div>
  </div>

  <!-- Reviews -->
  <div class="accordion-section">
    <div class="accordion-header" onclick="toggleAccordion(this)">Reviews</div>
    <div class="accordion-content">
      <h2>Leave a Review</h2>
      <form id="reviewForm">
        <label>Name:</label>
        <input id="name" required>

        <label>Rating:</label>
        <select id="rating" required>
          <option value="5">★★★★★</option>
          <option value="4">★★★★☆</option>
          <option value="3">★★★☆☆</option>
          <option value="2">★★☆☆☆</option>
          <option value="1">★☆☆☆☆</option>
        </select>

        <label>Review:</label>
        <textarea id="text" required></textarea>

        <button type="submit">Submit Review</button>
      </form>

      <h2>Reviews</h2>
      <div id="reviewsContainer"></div>
    </div>
  </div>
</div>

<!-- Footer -->
<footer class="site-footer">
  <div class="footer-left">
    <p>The Friendly Snail</p>
  </div>
  <div class="footer-right">
    <p>Email: <a href="mailto:business.gabelawrence@gmail.com">business.gabelawrence@gmail.com</a></p>
    <p>Phone: <a href="tel:+61493474198">0493 474 198</a></p>
  </div>
</footer>

<!-- Scripts -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<script>
  let currentPrice = 9.99;
  let reviews = JSON.parse(localStorage.getItem('reviews')) || [];

  window.onload = function () {
    displayReviews();
  };

  function changeImage(img) {
    document.getElementById('mainImage').src = img.src;
  }

  window.addEventListener('DOMContentLoaded', () => {
    const firstThumbnail = document.querySelector('.thumbnail');
    if (firstThumbnail) {
      document.getElementById('mainImage').src = firstThumbnail.src;
    }
  });

  function updatePrice() {
    const selected = document.getElementById('size').value;
    currentPrice = parseFloat(selected);
    document.getElementById('price').textContent = `$${currentPrice.toFixed(2)}`;
  }

  function addToCart() {
    const qty = parseInt(document.getElementById('quantity').value, 10);
    const size = document.getElementById('size').options[document.getElementById('size').selectedIndex].text;
    alert(`Added ${qty} x ${size} Snail Burger(s) to cart for $${(qty * currentPrice).toFixed(2)}.`);
  }

  function toggleAccordion(header) {
    const content = header.nextElementSibling;
    content.style.display = content.style.display === 'block' ? 'none' : 'block';
  }

  function displayReviews() {
    const container = document.getElementById('reviewsContainer');
    container.innerHTML = '';
    reviews.forEach(review => {
      const div = document.createElement('div');
      div.className = 'review';
      const stars = '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating);
      div.innerHTML = `
        <div><strong>Rating:</strong> <span style="color: gold;">${stars}</span></div>
        <div>${review.text}</div>
      `;
      container.appendChild(div);
    });
  }
</script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDsisw2KzJEozNdAIpLgdx5XULB7C-hZZs",
    authDomain: "the-friendly-snail.firebaseapp.com",
    databaseURL: "https://the-friendly-snail-default-rtdb.firebaseio.com",
    projectId: "the-friendly-snail",
    storageBucket: "the-friendly-snail.appspot.com",
    messagingSenderId: "948271049573",
    appId: "1:948271049573:web:ac012a9365d81eb1300f8c"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const reviewForm = document.getElementById('reviewForm');
  const reviewsContainer = document.getElementById('reviewsContainer');
  const productId = "snail-burger";

  reviewForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const name = document.getElementById('name').value.trim();
    const rating = parseInt(document.getElementById('rating').value);
    const text = document.getElementById('text').value.trim();

    const newReview = {
      name,
      rating,
      text,
      timestamp: new Date().toISOString()
    };

    db.ref(`reviews/${productId}`).push(newReview);
    reviewForm.reset();
  });

  db.ref(`reviews/${productId}`).on('value', (snapshot) => {
    const data = snapshot.val();
    reviewsContainer.innerHTML = '';
    if (!data) {
      reviewsContainer.innerHTML = "<p>No reviews yet.</p>";
      return;
    }
    const reviewsList = Object.values(data).sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
    reviewsList.forEach(review => {
      const div = document.createElement('div');
      div.className = 'review';
      const stars = '★'.repeat(review.rating) + '☆'.repeat(5 - review.rating);
      div.innerHTML = `
        <div><strong>${review.name}</strong> <span style="color: gold;">${stars}</span></div>
        <div>${review.text}</div>
      `;
      reviewsContainer.appendChild(div);
    });
  });
</script>

</body>
</html>
